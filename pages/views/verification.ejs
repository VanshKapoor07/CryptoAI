<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web3 Subscription Marketplace</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
          var options = {
            strings: [
              "Pay smarter, safer , faster, and enjoy crypto-powered services.",
              "Seamless ticket booking with Web3 .",
              "Experience the future of digital services!"
            ],
            typeSpeed: 50, // Typing speed
            backSpeed: 30, // Backspace speed
            loop: true,     // Loop animation
            showCursor: true, // Show cursor
            cursorChar: "|", // Cursor style
          };
      
          var typed = new Typed("#typed-text", options);
        });




        const client = <%- JSON.stringify(client) %>;  // JSON.stringify for safe JS usage
        const nft_id = <%= id%>;
        async function verify() {
            console.log("in transaction");
  
            const transaction = {
            arguments: [nft_id], // event_organizer, price
            function: '0x51e1de64d24251bbd3d9d96914e9cb8e79e08b3396c66c974d4b6087c0273916::a5::verify_owner',
            type: 'entry_function_payload',
            type_arguments: []
            };

            try {
            const txResponse = await window.aptos.signAndSubmitTransaction(transaction);
            console.log('Transaction response:', txResponse);


            console.log('Transaction successful!');
            alert("Verification was succesful, you may head back to your profile! ")
            } catch (error) {
            console.error('Transaction failed:', error);
            console.log('Transaction failed. Please try again.');
            }
                }
      </script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
    
        @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

        :root {
            --primary-color: #6366f1;
            --secondary-color: #4f46e5;
            --dark-bg: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.8);
            --light-text: #f8fafc;
        
        }
        
        body {
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: var(--light-text);
            font-family: "Poppins";
        }
        
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }
        
        .navbar {
            background-color: rgba(15, 23, 42, 0.95) !important;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .hero-section {
            padding-top: 7rem;
            min-height: 10vh;
            display: flex;
            align-items: center;
        }
        
        .gradient-text {
            background: linear-gradient(to right, #6366f1, #8b5cf6);
            background-clip: border-box;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .feature-card {
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            border-color: rgba(99, 102, 241, 0.5);
        }
        
        .primary-btn {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.4);
        }
        
        .carousel-item img {
            height: 400px;
            object-fit: cover;
            border-radius: 12px;
        }
        
        .carousel-container {
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }
        
        .custom-placeholder {
            height: 400px;
            background: linear-gradient(45deg, #4f46e5, #6366f1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: 600;
            border-radius: 12px;
        }
        
        /* Add spacing for fixed navbar */
        main {
            padding-top: 70px;
        }
    </style>
</head>
<body>
    <div id="particles-js"></div>
    
    <!-- Navbar -->
    

    <nav class="bg-white/30 dark:bg-gray-900/30 backdrop-blur-md border-none">
        <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
            <a href="https://flowbite.com/" class="flex items-center space-x-3 rtl:space-x-reverse">
                <img src="https://cryptologos.cc/logos/chainlink-link-logo.png?v=040" class="h-8" alt="Flowbite Logo" />
                <span class="self-center text-xl font-medium whitespace-nowrap dark:text-white">CryptoAI</span>
            </a>
            <!-- Crypto Ticker (Replacing Search) -->
        <!-- <div class="hidden md:block w-1/3 overflow-hidden whitespace-nowrap">
            <marquee class="text-gray-800 dark:text-white font-semibold">
                Bitcoin: $43,000 | Ethereum: $3,200 | Dogecoin: $0.15 | Solana: $120 | Cardano: $0.45 ðŸš€
            </marquee>
        </div> -->

            <div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-search">
                <ul class="flex flex-col p-4 md:p-0 mt-4 font-medium border-none rounded-lg bg-transparent md:space-x-8 
                    rtl:space-x-reverse md:flex-row md:mt-0 md:border-none md:bg-transparent dark:bg-transparent">
                    <li>
                        <a href="#" class="block py-2 px-3 text-gray-900 md:hover:text-blue-700 md:p-0 
                            dark:text-white md:dark:hover:text-blue-500">Home</a>
                    </li>
                    <li>
                        <a href="#" class="block py-2 px-3 text-gray-900 md:hover:text-blue-700 md:p-0 
                            dark:text-white md:dark:hover:text-blue-500">About</a>
                    </li>
                    <li>
                        <a href="#" class="block py-2 px-3 text-gray-900 md:hover:text-blue-700 md:p-0 
                            dark:text-white md:dark:hover:text-blue-500">Services</a>
                    </li>
                </ul>
            </div>
        </div>

    </nav>
    <main>
    <center>
    <div class="p-8 rounded-lg shadow-lg text-center w-96">
        <h1 class="text-2xl font-semibold mb-4">Input ID: <%= id %></h1>
        <button onclick="verify()" class="w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition">Verify your ticket</button>
        <form method="post" action="/back_to_profile" class="mt-4">
            <button type = "submit" class="w-full bg-gray-700 text-white py-2 rounded-lg hover:bg-gray-800 transition">Back To Profile</button>
        </form>
    </div>
</center>
        
      </main>
    
    <!-- Footer -->
    <footer class="py-5 bg-dark mt-5 border-top border-gray-800">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4 mb-lg-0">
                    <h5 class="gradient-text fw-bold mb-4">Web3Subs</h5>
                    <p class="text-light opacity-75">The future of subscription services powered by blockchain technology.</p>
                    <div class="d-flex gap-3 mt-4">
                        <a href="#" class="text-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-twitter-x" viewBox="0 0 16 16"><path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z"/></svg></a>
                        <a href="#" class="text-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-discord" viewBox="0 0 16 16"><path d="M13.545 2.907a13.2 13.2 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.2 12.2 0 0 0-3.658 0 8 8 0 0 0-.412-.833.05.05 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.04.04 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032q.003.036.038.05c1.522 1.116 2.992 1.795 4.43 2.239a.05.05 0 0 0 .054-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.028-.067c-.308-.111-.608-.232-.901-.36a.05.05 0 0 1-.022-.062.5.5 0 0 1 .024-.034c.061-.045.122-.092.181-.144a.05.05 0 0 1 .05-.007c2.619 1.196 5.454 1.196 8.045 0a.05.05 0 0 1 .051.007c.06.052.121.099.182.144q.022.019.005.034a.05.05 0 0 1-.023.062c-.293.128-.593.248-.901.36a.05.05 0 0 0-.028.067c.236.466.51.908.817 1.329a.05.05 0 0 0 .055.019c1.444-.444 2.915-1.123 4.43-2.239q.035-.014.039-.05c.333-3.435-.39-6.434-1.653-9.108a.04.04 0 0 0-.022-.017m-8.61 7.26c-.871 0-1.59-.795-1.59-1.77 0-.976.719-1.77 1.59-1.77 1.88.018 1.597.795 1.59 1.77 0 .975-.719 1.77-1.59 1.77m5.87 0c-.872 0-1.59-.795-1.59-1.77 0-.976.718-1.77 1.59-1.77.88 0 1.59.794 1.59 1.77 0 .975-.719 1.77-1.59 1.77"/></svg></a>
                        <a href="#" class="text-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"/></svg></a>
                        <a href="#" class="text-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-telegram" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.287 5.906q-1.168.486-4.666 2.01-.567.225-.595.442c-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294q.39.01.868-.32 1.076-.427 1.066-.836c-.004-.154-.181-.248-.4-.395-.604-.407-.975-.66 0-.66 1.316 0 2.627 1.004 2.627 1.004q.846.464 1.652.013c.186-.104.346-.215.343-.47-.002-.195-.175-.568-.355-.792q-1.264-1.577-3.713-1.088z"/></svg></a>
                    </div>
                </div>
                <div class="col-lg-2 col-6 mb-4 mb-lg-0">
                    <h6 class="fw-bold mb-4">Company</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-light opacity-75 text-decoration-none">About</a></li>
                        <li class="mb-2"><a href="#" class="text-light opacity-75 text-decoration-none">Careers</a></li>
                        <li class="mb-2"><a href="#" class="text-light opacity-75 text-decoration-none">Blog</a></li>
                        <li class="mb-2"><a href="#" class="text-light opacity-75 text-decoration-none">Press</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-6 mb-4 mb-lg-0">
                    <h6 class="fw-bold mb-4">Resources</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="#" class="text-light opacity-75 text-decoration-none">Documentation</a></li>
                        <li class="mb-2"><a href="#" class="text-light opacity-75 text-decoration-none">Help Center</a></li>
                        <li class="mb-2"><a href="#" class="text-light opacity-75 text-decoration-none">API</a></li>
                        <li class="mb-2"><a href="#" class="text-light opacity-75 text-decoration-none">Status</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h6 class="fw-bold mb-4">Subscribe to our newsletter</h6>
                    <p class="text-light opacity-75 mb-3">Stay updated with the latest in Web3 subscription technology</p>
                    <div class="input-group mb-3">
                        <input type="email" class="form-control bg-dark text-light border-secondary" placeholder="Your email">